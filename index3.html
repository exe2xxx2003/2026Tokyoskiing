<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 Japan Snow Trip</title>
    
    <!-- React & Tailwind (使用穩定版本) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Shippori+Mincho:wght@400;700&display=swap');
        
        :root {
            --jp-bg: #f4f4f0;
            --jp-black: #2b2b2b;
            --jp-red: #b93a32;
            --jp-blue: #2a4073;
        }

        body { 
            font-family: 'Noto Sans TC', sans-serif; 
            background-color: var(--jp-bg); 
            color: var(--jp-black); 
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .nav-glass { 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(12px); 
            border-top: 1px solid rgba(0,0,0,0.05);
            padding-bottom: env(safe-area-inset-bottom);
        }

        .font-mincho { font-family: 'Shippori Mincho', serif; }
        
        /* 載入動畫 */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

        /* 標籤樣式 */
        .tag-food { background-color: #fff7ed; color: #9a3412; border: 1px solid #ffedd5; }
        .tag-buy { background-color: #f0fdf4; color: #166534; border: 1px solid #dcfce7; }
        .tag-tip { background-color: #eff6ff; color: #1e40af; border: 1px solid #dbeafe; }
        .tag-alert { background-color: #fef2f2; color: #991b1b; border: 1px solid #fee2e2; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- 1. 內建圖標庫 (解決白畫面問題的核心) ---
        // 這些是將 SVG 直接寫入程式碼，不依賴外部 CDN，保證穩定
        const Icons = {
            MapPin: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            Calendar: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
            Train: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="16" height="16" x="4" y="3" rx="2"/><path d="M4 11h16"/><path d="M12 3v8"/><path d="m8 19-2 3"/><path d="m18 22-2-3"/><circle cx="8" cy="15" r="1"/><circle cx="16" cy="15" r="1"/></svg>,
            Hotel: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M10 22v-6.57"/><path d="M12 11h.01"/><path d="M12 7h.01"/><path d="M14 15.43V22"/><path d="M15 16a5 5 0 0 0-6 0"/><path d="M16 11h.01"/><path d="M16 7h.01"/><path d="M8 11h.01"/><path d="M8 7h.01"/><rect x="4" y="2" width="16" height="20" rx="2"/></svg>,
            Snowflake: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/><path d="m20 20-4-4"/><path d="m4 4 4 4"/><path d="m4 20 4-4"/><path d="m20 4-4 4"/></svg>,
            Plane: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 12h20"/><path d="M13 2v20"/><path d="m9 5 9 14"/><path d="m15 5-9 14"/></svg>, // Simplified plane for robustness
            CreditCard: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg>,
            Info: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
            Utensils: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></svg>,
            ShoppingBag: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>,
            AlertCircle: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>,
            Sun: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>,
            CloudSnow: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M8 15h.01"/><path d="M8 19h.01"/><path d="M12 17h.01"/><path d="M12 21h.01"/><path d="M16 15h.01"/><path d="M16 19h.01"/></svg>,
            CloudRain: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M16 14v6"/><path d="M8 14v6"/><path d="M12 16v6"/></svg>,
            Phone: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.05 12.05 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.03 12.03 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>,
            User: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
            Navigation: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="3 11 22 2 13 21 11 13 3 11"/></svg>,
            ChevronRight: ({size=20, className=""}) => <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m9 18 6-6-6-6"/></svg>
        };

        // --- 2. 資料整合 ---
        const tripData = {
            itinerary: [
                {
                    date: "1/14",
                    day: "週三",
                    title: "抵達與移動",
                    location: "東京・上野",
                    weather: { type: "sun", temp: "8°C", text: "晴時多雲" },
                    events: [
                        { time: "Day", type: "transport", title: "抵達東京成田", desc: "成田機場 -> 上野 (Skyliner)", cost: "¥2,570 (建議先買)", nav: "Keisei Ueno Station" },
                        { time: "Task", type: "task", title: "購買 JR 東京廣域周遊券", desc: "上野站 JR 服務中心購買 (¥15,000/人)", highlight: true, nav: "JR Ueno Station", guide: { tips: "這張票很重要！接下來三天都靠它。" } },
                        { time: "Stay", type: "hotel", title: "Smart Stay Shizuku Ueno", desc: "膠囊旅館體驗", nav: "Smart Stay Shizuku Ueno" }
                    ]
                },
                {
                    date: "1/15",
                    day: "週四",
                    title: "岩原滑雪場",
                    location: "越後湯澤",
                    weather: { type: "snow", temp: "-2°C", text: "大雪" },
                    events: [
                        { time: "06:14", type: "transport", title: "新幹線前往越後湯澤", desc: "上野發 (谷川 471) -> 07:22 抵達", cost: "周遊券 Cover" },
                        { time: "07:40", type: "snow", title: "租雪具 (Boosport)", desc: "行李寄放於雪具店 (¥500)", nav: "Boosport Yuzawa", guide: { tips: "記得攜帶護照以便租借" } },
                        { time: "09:00", type: "snow", title: "岩原滑雪場 (Iwappara)", desc: "初學者天堂，寬闊雪道", nav: "Iwappara Ski Resort", 
                          guide: { food: "必吃：Pizzeria La Locanda del Pittore (超有名披薩)", tips: "記得在入口處開通電子雪票" } 
                        },
                        { time: "18:00", type: "food", title: "越後湯澤晚餐", desc: "車站周邊", guide: { food: "必吃：爆彈飯糰、清酒博物館 (Ponshukan)" } },
                        { time: "Night", type: "hotel", title: "天使格蘭帝亞酒店", desc: "有接駁車，適合團體", nav: "Hotel Angel Grandia Echigo-Nakazato" }
                    ]
                },
                {
                    date: "1/16",
                    day: "週五",
                    title: "GALA 湯澤 & 移動",
                    location: "越後湯澤 -> 新宿",
                    weather: { type: "snow", temp: "-1°C", text: "小雪" },
                    events: [
                        { time: "AM", type: "task", title: "行李寄放", desc: "帶回雪具店寄放 ¥500", nav: "Boosport Yuzawa" },
                        { time: "10:00", type: "snow", title: "GALA 湯澤滑雪場", desc: "新幹線直達", nav: "GALA Yuzawa Snow Resort",
                          guide: { food: "GALA 美食街擁擠，建議提早用餐", tips: "下山時可搭乘纜車看風景" }
                        },
                        { time: "17:41", type: "transport", title: "新幹線回東京", desc: "越後湯澤 -> 大宮 -> 新宿 (19:21抵達)", cost: "周遊券 Cover" },
                        { time: "19:40", type: "hotel", title: "西新宿民宿", desc: "103 3-minute walk to Nishi-Shinjuku 5-chome", nav: "Nishi-Shinjuku 5-chome Station" },
                        { time: "Dinner", type: "food", title: "新宿晚餐", desc: "西新宿周邊", guide: { food: "燒肉 Like, 居酒屋街" } }
                    ]
                },
                {
                    date: "1/17",
                    day: "週六",
                    title: "箱根一日遊",
                    location: "箱根",
                    weather: { type: "cloud", temp: "5°C", text: "多雲" },
                    events: [
                        { time: "08:48", type: "transport", title: "前往新宿車站", desc: "大江戶線", cost: "¥178" },
                        { time: "09:25", type: "transport", title: "特急踴子號 -> 小田原", desc: "JR 廣域券 Cover", nav: "Odawara Station" },
                        { time: "10:45", type: "transport", title: "前往元箱根港", desc: "箱根登山巴士 (Z03/H線)", nav: "Moto-Hakone Port" },
                        { time: "12:00", type: "sight", title: "箱根神社 & 鳥居", desc: "步行 15 分鐘", nav: "Hakone Shrine",
                          guide: { food: "必吃：Hakone Cheese Terrace, 鰻魚飯, 蕎麥麵", buy: "必買：雲助糰子", tips: "海上鳥居拍照需排隊約 30-40 分鐘" }
                        },
                        { time: "13:25", type: "sight", title: "海賊船遊蘆之湖", desc: "元箱根港 -> 桃源台港", cost: "¥1,200", nav: "Togendai Port" },
                        { time: "16:30", type: "sight", title: "箱根湯本老街", desc: "特色：黑色溫泉蛋、熱饅頭", nav: "Hakone Yumoto Shopping Street" },
                        { time: "16:30", type: "spa", title: "吉池溫泉 (日歸)", desc: "¥2,250 + 毛巾 ¥330", nav: "Yoshiike Ryokan", guide: { tips: "知名的日式庭園，泡完湯必逛" } },
                        { time: "19:42", type: "transport", title: "回程：小田原 -> 新宿", desc: "JR 湘南新宿線", cost: "周遊券 Cover" }
                    ]
                },
                {
                    date: "1/18",
                    day: "週日",
                    title: "市區觀光 & 返程",
                    location: "東京",
                    weather: { type: "sun", temp: "9°C", text: "晴天" },
                    events: [
                        { time: "08:30", type: "sight", title: "麻布台 Hills TeamLab", desc: "全新熱門景點", nav: "Azabudai Hills", guide: { tips: "預約制，請確認票券 QR Code" } },
                        { time: "12:40", type: "transport", title: "前往機場", desc: "倫倫先出發 (JX800 12:35 起飛需注意時間)", highlight: true },
                        { time: "Check", type: "task", title: "檢查護照與隨身物品", desc: "確認所有成員航班時間" }
                    ]
                }
            ],
            flights: [
                { name: "倫倫", out: "JX800 08:25-12:35", in: "JX803 15:40-18:45" },
                { name: "east, HSuN", out: "MM626 10:40-14:55", in: "MM625 16:35-20:00" },
                { name: "小柯, aven, 寬, Leo, 善淳", out: "SL394 12:10-16:15", in: "SL395 17:15-20:20" },
                { name: "西瓜, 泰勒, 史塔森", out: "CI108 14:25-18:30", in: "CI105/CI101" }
            ],
            hotels: [
                { date: "1/14", name: "Smart Stay Shizuku Ueno", note: "east跟冠勲睡大宮", map: "Smart Stay Shizuku Ueno" },
                { date: "1/15", name: "Hotel Angel Grandia", note: "越後中里，有接駁車", map: "Hotel Angel Grandia Echigo-Nakazato" },
                { date: "1/16-18", name: "西新宿民宿 (Nishi-Shinjuku)", note: "5張雙人床 + 3張日式床鋪", map: "Nishi-Shinjuku 5-chome Station" }
            ],
            rentals: [
                { name: "HUANG YENLIN", item: "Ski 全套 (176/27.5)" },
                { name: "CHANG, KAI PO", item: "SB 單板 (165/26.5) Reg" },
                { name: "LIN, CHENG LUN", item: "SB Burton (172/28) Reg" },
                { name: "Shih-Che Chen", item: "SB Burton (175/27.5) Goofy" },
                { name: "Ko chechin", item: "Ski 全套 (170/27.5)" },
                { name: "HUANG YUNG PI", item: "Ski 套裝 (175/27)" },
                { name: "cheng tung yao", item: "SB 全套 (180/27) Reg" },
                { name: "LIU CHANG LIN", item: "Ski 全套 (183/28.5)" },
                { name: "ZHANG,EN-MAO", item: "Ski 全套 (172/27)" }
            ]
        };

        // --- 3. React 元件 ---

        const WeatherWidget = ({ weather }) => {
            const getIcon = () => {
                switch(weather.type) {
                    case 'snow': return <Icons.CloudSnow size={18} className="text-blue-400" />;
                    case 'sun': return <Icons.Sun size={18} className="text-orange-400" />;
                    case 'rain': return <Icons.CloudRain size={18} className="text-blue-600" />;
                    default: return <Icons.Sun size={18} className="text-gray-400" />;
                }
            };
            return (
                <div className="flex items-center gap-2 bg-white/60 backdrop-blur-sm px-3 py-1.5 rounded-full border border-white shadow-sm">
                    {getIcon()}
                    <span className="text-sm font-medium text-slate-700">{weather.text} {weather.temp}</span>
                </div>
            );
        };

        const GuideTag = ({ type, text }) => {
            let Icon = Icons.Info;
            let className = "tag-tip";
            
            if (type === "food") { Icon = Icons.Utensils; className = "tag-food"; }
            if (type === "buy") { Icon = Icons.ShoppingBag; className = "tag-buy"; }
            if (type === "alert") { Icon = Icons.AlertCircle; className = "tag-alert"; }

            return (
                <div className={`mt-3 flex items-start gap-2 text-xs p-2.5 rounded-lg ${className}`}>
                    <Icon size={14} className="mt-0.5 shrink-0" />
                    <span className="leading-relaxed">{text}</span>
                </div>
            );
        };

        const EventCard = ({ event }) => {
            const getIcon = (type) => {
                switch(type) {
                    case 'transport': return <Icons.Train size={18} className="text-slate-600" />;
                    case 'food': return <Icons.Utensils size={18} className="text-orange-500" />;
                    case 'hotel': return <Icons.Hotel size={18} className="text-indigo-600" />;
                    case 'snow': return <Icons.Snowflake size={18} className="text-sky-500" />;
                    case 'sight': return <Icons.MapPin size={18} className="text-red-500" />;
                    case 'task': return <Icons.CreditCard size={18} className="text-emerald-600" />;
                    default: return <Icons.Info size={18} className="text-gray-500" />;
                }
            };

            const openNav = (e) => {
                e.stopPropagation();
                if (event.nav) {
                    window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(event.nav)}`, '_blank');
                }
            };

            return (
                <div className={`bg-white p-5 rounded-2xl mb-4 relative overflow-hidden transition-all duration-200 active:scale-[0.98] border border-transparent ${event.highlight ? 'border-l-4 border-l-red-500 shadow-md' : 'shadow-sm'}`}>
                    <div className="flex gap-4">
                        <div className="flex flex-col items-center gap-2 min-w-[50px]">
                            <span className="text-xs font-bold text-slate-400 font-mono tracking-wide">{event.time}</span>
                            <div className={`w-10 h-10 rounded-full flex items-center justify-center ${event.highlight ? 'bg-red-50' : 'bg-slate-50'}`}>
                                {getIcon(event.type)}
                            </div>
                            {event.type === 'transport' && <div className="h-full w-0.5 bg-slate-100 my-1 rounded-full"></div>}
                        </div>

                        <div className="flex-1 pb-1">
                            <div className="flex justify-between items-start">
                                <h3 className={`font-bold text-[15px] leading-tight ${event.highlight ? 'text-red-700' : 'text-slate-800'}`}>
                                    {event.title}
                                </h3>
                                {event.nav && (
                                    <button onClick={openNav} className="text-slate-300 hover:text-blue-500 p-1 -mt-1 -mr-1">
                                        <Icons.Navigation size={18} />
                                    </button>
                                )}
                            </div>
                            
                            <p className="text-sm text-slate-500 mt-1.5 leading-relaxed">{event.desc}</p>
                            
                            {event.cost && (
                                <div className="mt-2 inline-flex items-center gap-1 text-[11px] font-medium text-slate-500 bg-slate-100 px-2 py-0.5 rounded-full">
                                    <Icons.CreditCard size={10} />
                                    {event.cost}
                                </div>
                            )}

                            {event.guide && (
                                <div className="mt-1 space-y-1">
                                    {event.guide.food && <GuideTag type="food" text={event.guide.food} />}
                                    {event.guide.buy && <GuideTag type="buy" text={event.guide.buy} />}
                                    {event.guide.tips && <GuideTag type="tips" text={event.guide.tips} />}
                                    {event.guide.alert && <GuideTag type="alert" text={event.guide.alert} />}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const ItineraryView = () => {
            const [activeDayIdx, setActiveDayIdx] = useState(0);
            const activeDay = tripData.itinerary[activeDayIdx];

            return (
                <div className="animate-fade-in pb-24">
                    <div className="pt-6 px-5 mb-4">
                        <div className="flex justify-between items-start mb-4">
                            <div>
                                <h1 className="text-3xl font-bold font-mincho text-slate-800 tracking-tight">{activeDay.title}</h1>
                                <div className="flex items-center gap-2 mt-2 text-slate-500">
                                    <Icons.MapPin size={14} />
                                    <span className="text-sm font-medium">{activeDay.location}</span>
                                </div>
                            </div>
                            <WeatherWidget weather={activeDay.weather} />
                        </div>
                    </div>

                    <div className="sticky top-0 z-10 bg-[#f4f4f0]/95 backdrop-blur-md pt-2 pb-4 px-4 overflow-x-auto hide-scrollbar flex gap-3 mb-2 border-b border-slate-200/50">
                        {tripData.itinerary.map((day, idx) => (
                            <button 
                                key={idx}
                                onClick={() => setActiveDayIdx(idx)}
                                className={`flex flex-col items-center min-w-[64px] py-2 px-1 rounded-xl transition-all duration-300 ${activeDayIdx === idx ? 'bg-[#2b2b2b] text-white shadow-lg scale-105' : 'bg-white text-slate-400 border border-slate-100'}`}
                            >
                                <span className="text-[10px] font-medium opacity-80">{day.date}</span>
                                <span className="text-sm font-bold">{day.day}</span>
                            </button>
                        ))}
                    </div>

                    <div className="px-4 mt-2">
                        {activeDay.events.map((event, idx) => (
                            <EventCard key={idx} event={event} />
                        ))}
                    </div>

                    <div className="px-6 mt-6">
                         <button 
                            onClick={() => window.open(`https://www.google.com/maps/search/${activeDay.location}`, '_blank')}
                            className="w-full bg-white border border-slate-200 text-slate-600 py-3 rounded-xl text-sm font-bold shadow-sm flex items-center justify-center gap-2 active:bg-slate-50 transition-colors"
                        >
                            <Icons.MapPin size={16} />
                            探索 {activeDay.location} 地圖
                        </button>
                    </div>
                </div>
            );
        };

        const ToolsView = () => {
            const SectionTitle = ({ icon: Icon, title, color }) => (
                <div className={`flex items-center gap-2 mb-3 text-${color}-700`}>
                    <Icon size={20} />
                    <h3 className="font-bold text-lg font-mincho">{title}</h3>
                </div>
            );

            return (
                <div className="animate-fade-in px-4 py-6 pb-24 space-y-6">
                    <h2 className="text-2xl font-bold font-mincho text-slate-800 px-1">旅程助手</h2>

                    <div className="bg-white rounded-2xl p-5 shadow-sm">
                        <SectionTitle icon={Icons.Plane} title="航班資訊" color="blue" />
                        <div className="space-y-4">
                            {tripData.flights.map((f, i) => (
                                <div key={i} className="border-b border-slate-50 last:border-0 pb-3 last:pb-0">
                                    <div className="flex items-center gap-2 mb-1">
                                        <Icons.User size={14} className="text-slate-400"/>
                                        <span className="text-sm font-bold text-slate-800">{f.name}</span>
                                    </div>
                                    <div className="grid grid-cols-1 gap-1 pl-6">
                                        <div className="text-xs text-slate-500 bg-slate-50 p-1.5 rounded flex justify-between">
                                            <span>去程</span> <span className="font-mono text-slate-700">{f.out}</span>
                                        </div>
                                        <div className="text-xs text-slate-500 bg-slate-50 p-1.5 rounded flex justify-between">
                                            <span>回程</span> <span className="font-mono text-slate-700">{f.in}</span>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="bg-white rounded-2xl p-5 shadow-sm">
                        <SectionTitle icon={Icons.Hotel} title="住宿資訊" color="indigo" />
                        <div className="space-y-3">
                            {tripData.hotels.map((h, i) => (
                                <div key={i} className="flex gap-3 items-start" onClick={() => window.open(`https://www.google.com/maps/search/${h.map}`, '_blank')}>
                                    <div className="bg-indigo-50 text-indigo-600 text-[10px] font-bold px-2 py-1 rounded h-fit shrink-0 mt-0.5">
                                        {h.date}
                                    </div>
                                    <div>
                                        <div className="text-sm font-bold text-slate-800 flex items-center gap-1">
                                            {h.name}
                                            <Icons.ChevronRight size={12} className="text-slate-300"/>
                                        </div>
                                        <div className="text-xs text-slate-400 mt-0.5">{h.note}</div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="bg-white rounded-2xl p-5 shadow-sm">
                        <SectionTitle icon={Icons.Snowflake} title="雪具清單" color="cyan" />
                        <div className="max-h-60 overflow-y-auto pr-2 custom-scrollbar">
                            <table className="w-full text-xs">
                                <thead className="text-left text-slate-400 border-b border-slate-100">
                                    <tr><th className="pb-2 font-normal">姓名</th><th className="pb-2 font-normal text-right">裝備</th></tr>
                                </thead>
                                <tbody className="text-slate-600">
                                    {tripData.rentals.map((r, i) => (
                                        <tr key={i} className="border-b border-slate-50 last:border-0">
                                            <td className="py-2.5 font-medium">{r.name.split(' ')[0]}</td>
                                            <td className="py-2.5 text-right">{r.item}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div className="grid grid-cols-2 gap-3">
                        <button className="bg-red-50 p-4 rounded-2xl flex flex-col items-center justify-center gap-2 text-red-700 active:bg-red-100 transition-colors border border-red-100">
                            <Icons.Phone size={24} />
                            <span className="text-sm font-bold">緊急 119</span>
                        </button>
                         <button className="bg-emerald-50 p-4 rounded-2xl flex flex-col items-center justify-center gap-2 text-emerald-700 active:bg-emerald-100 transition-colors border border-emerald-100">
                            <Icons.CreditCard size={24} />
                            <span className="text-sm font-bold">預算表</span>
                        </button>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('itinerary');

            return (
                <div className="min-h-screen max-w-md mx-auto bg-[#f4f4f0] relative shadow-2xl border-x border-white/50">
                    {activeTab === 'itinerary' ? <ItineraryView /> : <ToolsView />}

                    <div className="fixed bottom-0 left-0 w-full z-50">
                        <div className="max-w-md mx-auto nav-glass px-8 h-[88px] flex justify-between items-start pt-4 relative">
                            <button 
                                onClick={() => setActiveTab('itinerary')}
                                className={`flex flex-col items-center gap-1.5 transition-all duration-300 w-16 ${activeTab === 'itinerary' ? 'text-[#2b2b2b]' : 'text-[#b0b0b0] scale-95'}`}
                            >
                                <Icons.Calendar size={26} strokeWidth={activeTab === 'itinerary' ? 2.5 : 2} />
                                <span className="text-[10px] font-bold tracking-wide">行程</span>
                            </button>
                            
                            <div className="absolute left-1/2 -translate-x-1/2 -top-6 pointer-events-none">
                                <div className="w-14 h-14 bg-[#b93a32] rounded-full shadow-lg shadow-red-900/20 flex items-center justify-center border-4 border-[#f4f4f0]">
                                    <Icons.Snowflake size={24} className="text-white" />
                                </div>
                            </div>

                            <button 
                                onClick={() => setActiveTab('tools')}
                                className={`flex flex-col items-center gap-1.5 transition-all duration-300 w-16 ${activeTab === 'tools' ? 'text-[#2b2b2b]' : 'text-[#b0b0b0] scale-95'}`}
                            >
                                <Icons.Info size={26} strokeWidth={activeTab === 'tools' ? 2.5 : 2} />
                                <span className="text-[10px] font-bold tracking-wide">資訊</span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>



